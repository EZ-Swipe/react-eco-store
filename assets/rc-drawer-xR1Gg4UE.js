import{h as xe,g as K,c as le,e as c,b as ce}from"./@babel-gmUhV_pN.js";import{P as Ne}from"./@rc-component-Dpy5ogHM.js";import{e as Re,A as ie,b as Se,K as re,a as de}from"./rc-util-BttELmaR.js";import{r as a}from"./react-CPNw1Jrz.js";import{c as _}from"./classnames-Bxm1Ctah.js";import{C as fe}from"./rc-motion-PMDr4Ect.js";var ve=a.createContext(null),he=a.createContext({}),Ee=["prefixCls","className","containerRef"],Me=function(t){var f=t.prefixCls,C=t.className,v=t.containerRef,s=xe(t,Ee),i=a.useContext(he),d=i.panel,b=Re(d,v);return a.createElement("div",K({className:_("".concat(f,"-content"),C),role:"dialog",ref:b},ie(t,{aria:!0}),{"aria-modal":"true"},s))};function me(e){return typeof e=="string"&&String(Number(e))===e?(Se(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var Ce={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function De(e,t){var f,C,v,s=e.prefixCls,i=e.open,d=e.placement,b=e.inline,E=e.push,p=e.forceRender,T=e.autoFocus,I=e.keyboard,u=e.classNames,A=e.rootClassName,L=e.rootStyle,M=e.zIndex,j=e.className,$=e.id,F=e.style,h=e.motion,B=e.width,V=e.height,W=e.children,X=e.mask,Y=e.maskClosable,q=e.maskMotion,G=e.maskClassName,H=e.maskStyle,D=e.afterOpenChange,g=e.onClose,P=e.onMouseEnter,J=e.onMouseOver,Q=e.onMouseLeave,U=e.onClick,Z=e.onKeyDown,ee=e.onKeyUp,r=e.styles,x=a.useRef(),m=a.useRef(),O=a.useRef();a.useImperativeHandle(t,function(){return x.current});var ae=function(l){var R=l.keyCode,S=l.shiftKey;switch(R){case re.TAB:{if(R===re.TAB){if(!S&&document.activeElement===O.current){var ne;(ne=m.current)===null||ne===void 0||ne.focus({preventScroll:!0})}else if(S&&document.activeElement===m.current){var oe;(oe=O.current)===null||oe===void 0||oe.focus({preventScroll:!0})}}break}case re.ESC:{g&&I&&(l.stopPropagation(),g(l));break}}};a.useEffect(function(){if(i&&T){var n;(n=x.current)===null||n===void 0||n.focus({preventScroll:!0})}},[i]);var te=a.useState(!1),z=le(te,2),se=z[0],N=z[1],o=a.useContext(ve),y;typeof E=="boolean"?y=E?{}:{distance:0}:y=E||{};var k=(f=(C=(v=y)===null||v===void 0?void 0:v.distance)!==null&&C!==void 0?C:o==null?void 0:o.pushDistance)!==null&&f!==void 0?f:180,ye=a.useMemo(function(){return{pushDistance:k,push:function(){N(!0)},pull:function(){N(!1)}}},[k]);a.useEffect(function(){if(i){var n;o==null||(n=o.push)===null||n===void 0||n.call(o)}else{var l;o==null||(l=o.pull)===null||l===void 0||l.call(o)}},[i]),a.useEffect(function(){return function(){var n;o==null||(n=o.pull)===null||n===void 0||n.call(o)}},[]);var ke=X&&a.createElement(fe,K({key:"mask"},q,{visible:i}),function(n,l){var R=n.className,S=n.style;return a.createElement("div",{className:_("".concat(s,"-mask"),R,u==null?void 0:u.mask,G),style:c(c(c({},S),H),r==null?void 0:r.mask),onClick:Y&&i?g:void 0,ref:l})}),we=typeof h=="function"?h(d):h,w={};if(se&&k)switch(d){case"top":w.transform="translateY(".concat(k,"px)");break;case"bottom":w.transform="translateY(".concat(-k,"px)");break;case"left":w.transform="translateX(".concat(k,"px)");break;default:w.transform="translateX(".concat(-k,"px)");break}d==="left"||d==="right"?w.width=me(B):w.height=me(V);var be={onMouseEnter:P,onMouseOver:J,onMouseLeave:Q,onClick:U,onKeyDown:Z,onKeyUp:ee},ge=a.createElement(fe,K({key:"panel"},we,{visible:i,forceRender:p,onVisibleChanged:function(l){D==null||D(l)},removeOnLeave:!1,leavedClassName:"".concat(s,"-content-wrapper-hidden")}),function(n,l){var R=n.className,S=n.style;return a.createElement("div",K({className:_("".concat(s,"-content-wrapper"),u==null?void 0:u.wrapper,R),style:c(c(c({},w),S),r==null?void 0:r.wrapper)},ie(e,{data:!0})),a.createElement(Me,K({id:$,containerRef:l,prefixCls:s,className:_(j,u==null?void 0:u.content),style:c(c({},F),r==null?void 0:r.content)},ie(e,{aria:!0}),be),W))}),ue=c({},L);return M&&(ue.zIndex=M),a.createElement(ve.Provider,{value:ye},a.createElement("div",{className:_(s,"".concat(s,"-").concat(d),A,ce(ce({},"".concat(s,"-open"),i),"".concat(s,"-inline"),b)),style:ue,tabIndex:-1,ref:x,onKeyDown:ae},ke,a.createElement("div",{tabIndex:0,ref:m,style:Ce,"aria-hidden":"true","data-sentinel":"start"}),ge,a.createElement("div",{tabIndex:0,ref:O,style:Ce,"aria-hidden":"true","data-sentinel":"end"})))}var Pe=a.forwardRef(De),Le=function(t){var f=t.open,C=f===void 0?!1:f,v=t.prefixCls,s=v===void 0?"rc-drawer":v,i=t.placement,d=i===void 0?"right":i,b=t.autoFocus,E=b===void 0?!0:b,p=t.keyboard,T=p===void 0?!0:p,I=t.width,u=I===void 0?378:I,A=t.mask,L=A===void 0?!0:A,M=t.maskClosable,j=M===void 0?!0:M,$=t.getContainer,F=t.forceRender,h=t.afterOpenChange,B=t.destroyOnClose,V=t.onMouseEnter,W=t.onMouseOver,X=t.onMouseLeave,Y=t.onClick,q=t.onKeyDown,G=t.onKeyUp,H=t.panelRef,D=a.useState(!1),g=le(D,2),P=g[0],J=g[1],Q=a.useState(!1),U=le(Q,2),Z=U[0],ee=U[1];de(function(){ee(!0)},[]);var r=Z?C:!1,x=a.useRef(),m=a.useRef();de(function(){r&&(m.current=document.activeElement)},[r]);var O=function(N){var o;if(J(N),h==null||h(N),!N&&m.current&&!((o=x.current)!==null&&o!==void 0&&o.contains(m.current))){var y;(y=m.current)===null||y===void 0||y.focus({preventScroll:!0})}},ae=a.useMemo(function(){return{panel:H}},[H]);if(!F&&!P&&!r&&B)return null;var te={onMouseEnter:V,onMouseOver:W,onMouseLeave:X,onClick:Y,onKeyDown:q,onKeyUp:G},z=c(c({},t),{},{open:r,prefixCls:s,placement:d,autoFocus:E,keyboard:T,width:u,mask:L,maskClosable:j,inline:$===!1,afterOpenChange:O,ref:x},te);return a.createElement(he.Provider,{value:ae},a.createElement(Ne,{open:r||F||P,autoDestroy:!1,getContainer:$,autoLock:L&&(r||P)},a.createElement(Pe,z)))};export{Le as D};
