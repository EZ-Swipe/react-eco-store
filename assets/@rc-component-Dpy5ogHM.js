import{c as w,f as ut,g as mr,e as A,h as Tt}from"./@babel-gmUhV_pN.js";import{r as a}from"./react-CPNw1Jrz.js";import{r as Dt}from"./react-dom-DjwJaTjF.js";import{c as Fr,a as F,d as Et,u as xt,r as ft,s as Ar,e as Rt,f as Wt,h as zt,i as Te,j as lt,k as Bt,g as vt,l as Ht,m as _t,n as Vt}from"./rc-util-BttELmaR.js";import{c as rr}from"./classnames-Bxm1Ctah.js";import{R as $t}from"./rc-resize-observer-BhALAyej.js";import{C as kt}from"./rc-motion-PMDr4Ect.js";var Lt=a.createContext(null),dt=[];function Ft(e,t){var r=a.useState(function(){if(!Fr())return null;var y=document.createElement("div");return y}),o=w(r,1),n=o[0],u=a.useRef(!1),l=a.useContext(Lt),s=a.useState(dt),h=w(s,2),c=h[0],g=h[1],v=l||(u.current?void 0:function(y){g(function(D){var L=[y].concat(ut(D));return L})});function S(){n.parentElement||document.body.appendChild(n),u.current=!0}function d(){var y;(y=n.parentElement)===null||y===void 0||y.removeChild(n),u.current=!1}return F(function(){return e?l?l(S):S():d(),d},[e]),F(function(){c.length&&(c.forEach(function(y){return y()}),g(dt))},[c]),[n,v]}function At(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var Ut="rc-util-locker-".concat(Date.now()),mt=0;function It(e){var t=!!e,r=a.useState(function(){return mt+=1,"".concat(Ut,"_").concat(mt)}),o=w(r,1),n=o[0];F(function(){if(t){var u=Et(document.body).width,l=At();xt(`
html body {
  overflow-y: hidden;
  `.concat(l?"width: calc(100% - ".concat(u,"px);"):"",`
}`),n)}else ft(n);return function(){ft(n)}},[t,n])}var ht=!1;function qt(e){return typeof e=="boolean"&&(ht=e),ht}var gt=function(t){return t===!1?!1:!Fr()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},Nt=a.forwardRef(function(e,t){var r=e.open,o=e.autoLock,n=e.getContainer;e.debug;var u=e.autoDestroy,l=u===void 0?!0:u,s=e.children,h=a.useState(r),c=w(h,2),g=c[0],v=c[1],S=g||r;a.useEffect(function(){(l||r)&&v(r)},[r,l]);var d=a.useState(function(){return gt(n)}),y=w(d,2),D=y[0],L=y[1];a.useEffect(function(){var ee=gt(n);L(ee??null)});var B=Ft(S&&!D),T=w(B,2),P=T[0],m=T[1],H=D??P;It(o&&r&&Fr()&&(H===P||H===document.body));var O=null;if(s&&Ar(s)&&t){var p=s;O=p.ref}var ne=Rt(O,t);if(!S||!Fr()||D===void 0)return null;var fe=H===!1||qt(),J=s;return t&&(J=a.cloneElement(s,{ref:ne})),a.createElement(Lt.Provider,{value:m},fe?J:Dt.createPortal(J,H))});function jt(e){var t=e.prefixCls,r=e.align,o=e.arrow,n=e.arrowPos,u=o||{},l=u.className,s=u.content,h=n.x,c=h===void 0?0:h,g=n.y,v=g===void 0?0:g,S=a.useRef();if(!r||!r.points)return null;var d={position:"absolute"};if(r.autoArrow!==!1){var y=r.points[0],D=r.points[1],L=y[0],B=y[1],T=D[0],P=D[1];L===T||!["t","b"].includes(L)?d.top=v:L==="t"?d.top=0:d.bottom=0,B===P||!["l","r"].includes(B)?d.left=c:B==="l"?d.left=0:d.right=0}return a.createElement("div",{ref:S,className:rr("".concat(t,"-arrow"),l),style:d},s)}function Qt(e){var t=e.prefixCls,r=e.open,o=e.zIndex,n=e.mask,u=e.motion;return n?a.createElement(kt,mr({},u,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(l){var s=l.className;return a.createElement("div",{style:{zIndex:o},className:rr("".concat(t,"-mask"),s)})}):null}var Jt=a.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),Gt=a.forwardRef(function(e,t){var r=e.popup,o=e.className,n=e.prefixCls,u=e.style,l=e.target,s=e.onVisibleChanged,h=e.open,c=e.keepDom,g=e.fresh,v=e.onClick,S=e.mask,d=e.arrow,y=e.arrowPos,D=e.align,L=e.motion,B=e.maskMotion,T=e.forceRender,P=e.getPopupContainer,m=e.autoDestroy,H=e.portal,O=e.zIndex,p=e.onMouseEnter,ne=e.onMouseLeave,fe=e.onPointerEnter,J=e.ready,ee=e.offsetX,de=e.offsetY,me=e.offsetR,oe=e.offsetB,he=e.onAlign,E=e.onPrepare,W=e.stretch,M=e.targetWidth,G=e.targetHeight,R=typeof r=="function"?r():r,ie=h||c,re=(P==null?void 0:P.length)>0,tr=a.useState(!P||!re),Ie=w(tr,2),ge=Ie[0],qe=Ie[1];if(F(function(){!ge&&re&&l&&qe(!0)},[ge,re,l]),!ge)return null;var te="auto",z={left:"-1000vw",top:"-1000vh",right:te,bottom:te};if(J||!h){var K,ue=D.points,le=D.dynamicInset||((K=D._experimental)===null||K===void 0?void 0:K.dynamicInset),je=le&&ue[0][1]==="r",ar=le&&ue[0][0]==="b";je?(z.right=me,z.left=te):(z.left=ee,z.right=te),ar?(z.bottom=oe,z.top=te):(z.top=de,z.bottom=te)}var V={};return W&&(W.includes("height")&&G?V.height=G:W.includes("minHeight")&&G&&(V.minHeight=G),W.includes("width")&&M?V.width=M:W.includes("minWidth")&&M&&(V.minWidth=M)),h||(V.pointerEvents="none"),a.createElement(H,{open:T||ie,getContainer:P&&function(){return P(l)},autoDestroy:m},a.createElement(Qt,{prefixCls:n,open:h,zIndex:O,mask:S,motion:B}),a.createElement($t,{onResize:he,disabled:!h},function(Qe){return a.createElement(kt,mr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:T,leavedClassName:"".concat(n,"-hidden")},L,{onAppearPrepare:E,onEnterPrepare:E,visible:h,onVisibleChanged:function(q){var ye;L==null||(ye=L.onVisibleChanged)===null||ye===void 0||ye.call(L,q),s(q)}}),function(we,q){var ye=we.className,b=we.style,Ee=rr(n,ye,o);return a.createElement("div",{ref:Wt(Qe,t,q),className:Ee,style:A(A(A(A({"--arrow-x":"".concat(y.x||0,"px"),"--arrow-y":"".concat(y.y||0,"px")},z),V),b),{},{boxSizing:"border-box",zIndex:O},u),onMouseEnter:p,onMouseLeave:ne,onPointerEnter:fe,onClick:v},d&&a.createElement(jt,{prefixCls:n,arrow:d,arrowPos:y,align:D}),a.createElement(Jt,{cache:!h&&!g},R))})}))}),Kt=a.forwardRef(function(e,t){var r=e.children,o=e.getTriggerDOMNode,n=Ar(r),u=a.useCallback(function(s){zt(t,o?o(s):s)},[o]),l=Rt(u,r.ref);return n?a.cloneElement(r,{ref:l}):r}),yt=a.createContext(null);function Ct(e){return e?Array.isArray(e)?e:[e]:[]}function Zt(e,t,r,o){return a.useMemo(function(){var n=Ct(r??t),u=Ct(o??t),l=new Set(n),s=new Set(u);return e&&(l.has("hover")&&(l.delete("hover"),l.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[l,s]},[e,t,r,o])}function Yt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Xt(e,t,r,o){for(var n=r.points,u=Object.keys(e),l=0;l<u.length;l+=1){var s,h=u[l];if(Yt((s=e[h])===null||s===void 0?void 0:s.points,n,o))return"".concat(t,"-placement-").concat(h)}return""}function St(e,t,r,o){return t||(r?{motionName:"".concat(e,"-").concat(r)}:o?{motionName:o}:null)}function gr(e){return e.ownerDocument.defaultView}function st(e){for(var t=[],r=e==null?void 0:e.parentElement,o=["hidden","scroll","clip","auto"];r;){var n=gr(r).getComputedStyle(r),u=n.overflowX,l=n.overflowY,s=n.overflow;[u,l,s].some(function(h){return o.includes(h)})&&t.push(r),r=r.parentElement}return t}function hr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function dr(e){return hr(parseFloat(e),0)}function Mt(e,t){var r=A({},e);return(t||[]).forEach(function(o){if(!(o instanceof HTMLBodyElement||o instanceof HTMLHtmlElement)){var n=gr(o).getComputedStyle(o),u=n.overflow,l=n.overflowClipMargin,s=n.borderTopWidth,h=n.borderBottomWidth,c=n.borderLeftWidth,g=n.borderRightWidth,v=o.getBoundingClientRect(),S=o.offsetHeight,d=o.clientHeight,y=o.offsetWidth,D=o.clientWidth,L=dr(s),B=dr(h),T=dr(c),P=dr(g),m=hr(Math.round(v.width/y*1e3)/1e3),H=hr(Math.round(v.height/S*1e3)/1e3),O=(y-D-T-P)*m,p=(S-d-L-B)*H,ne=L*H,fe=B*H,J=T*m,ee=P*m,de=0,me=0;if(u==="clip"){var oe=dr(l);de=oe*m,me=oe*H}var he=v.x+J-de,E=v.y+ne-me,W=he+v.width+2*de-J-ee-O,M=E+v.height+2*me-ne-fe-p;r.left=Math.max(r.left,he),r.top=Math.max(r.top,E),r.right=Math.min(r.right,W),r.bottom=Math.min(r.bottom,M)}}),r}function bt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(t),o=r.match(/^(.*)\%$/);return o?e*(parseFloat(o[1])/100):parseFloat(r)}function wt(e,t){var r=t||[],o=w(r,2),n=o[0],u=o[1];return[bt(e.width,n),bt(e.height,u)]}function Pt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function er(e,t){var r=t[0],o=t[1],n,u;return r==="t"?u=e.y:r==="b"?u=e.y+e.height:u=e.y+e.height/2,o==="l"?n=e.x:o==="r"?n=e.x+e.width:n=e.x+e.width/2,{x:n,y:u}}function Ne(e,t){var r={t:"b",b:"t",l:"r",r:"l"};return e.map(function(o,n){return n===t?r[o]||"c":o}).join("")}function Ot(e,t,r,o,n,u,l){var s=a.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:n[o]||{}}),h=w(s,2),c=h[0],g=h[1],v=a.useRef(0),S=a.useMemo(function(){return t?st(t):[]},[t]),d=a.useRef({}),y=function(){d.current={}};e||y();var D=Te(function(){if(t&&r&&e){let X=function(be,Ue){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ee,pe=R.x+be,cr=R.y+Ue,fr=pe+K,Hr=cr+z,tt=Math.max(pe,Oe.left),at=Math.max(cr,Oe.top),nt=Math.min(fr,Oe.right),ot=Math.min(Hr,Oe.bottom);return Math.max(0,(nt-tt)*(ot-at))},Br=function(){Re=R.y+C,$e=Re+z,ke=R.x+N,Ke=ke+K};var T,P,m=t,H=m.ownerDocument,O=gr(m),p=O.getComputedStyle(m),ne=p.width,fe=p.height,J=p.position,ee=m.style.left,de=m.style.top,me=m.style.right,oe=m.style.bottom,he=m.style.overflow,E=A(A({},n[o]),u),W=H.createElement("div");(T=m.parentElement)===null||T===void 0||T.appendChild(W),W.style.left="".concat(m.offsetLeft,"px"),W.style.top="".concat(m.offsetTop,"px"),W.style.position=J,W.style.height="".concat(m.offsetHeight,"px"),W.style.width="".concat(m.offsetWidth,"px"),m.style.left="0",m.style.top="0",m.style.right="auto",m.style.bottom="auto",m.style.overflow="hidden";var M;if(Array.isArray(r))M={x:r[0],y:r[1],width:0,height:0};else{var G=r.getBoundingClientRect();M={x:G.x,y:G.y,width:G.width,height:G.height}}var R=m.getBoundingClientRect(),ie=H.documentElement,re=ie.clientWidth,tr=ie.clientHeight,Ie=ie.scrollWidth,ge=ie.scrollHeight,qe=ie.scrollTop,te=ie.scrollLeft,z=R.height,K=R.width,ue=M.height,le=M.width,je={left:0,top:0,right:re,bottom:tr},ar={left:-te,top:-qe,right:Ie-te,bottom:ge-qe},V=E.htmlRegion,Qe="visible",we="visibleFirst";V!=="scroll"&&V!==we&&(V=Qe);var q=V===we,ye=Mt(ar,S),b=Mt(je,S),Ee=V===Qe?b:ye,Z=q?b:Ee;m.style.left="auto",m.style.top="auto",m.style.right="0",m.style.bottom="0";var yr=m.getBoundingClientRect();m.style.left=ee,m.style.top=de,m.style.right=me,m.style.bottom=oe,m.style.overflow=he,(P=m.parentElement)===null||P===void 0||P.removeChild(W);var xe=hr(Math.round(K/parseFloat(ne)*1e3)/1e3),We=hr(Math.round(z/parseFloat(fe)*1e3)/1e3);if(xe===0||We===0||lt(r)&&!Bt(r))return;var Cr=E.offset,U=E.targetOffset,Ur=wt(R,Cr),Sr=w(Ur,2),ae=Sr[0],Y=Sr[1],ve=wt(M,U),Mr=w(ve,2),br=Mr[0],Ir=Mr[1];M.x-=br,M.y-=Ir;var Je=E.points||[],j=w(Je,2),Pe=j[0],qr=j[1],Ce=Pt(qr),Q=Pt(Pe),wr=er(M,Ce),nr=er(R,Q),De=A({},E),N=wr.x-nr.x+ae,C=wr.y-nr.y+Y,se=X(N,C),ce=X(N,C,b),ze=er(M,["t","l"]),or=er(R,["t","l"]),ir=er(M,["b","r"]),ur=er(R,["b","r"]),I=E.overflow||{},jr=I.adjustX,Pr=I.adjustY,Ge=I.shiftX,lr=I.shiftY,Dr=function(Ue){return typeof Ue=="boolean"?Ue:Ue>=0},Re,$e,ke,Ke;Br();var vr=Dr(Pr),sr=Q[0]===Ce[0];if(vr&&Q[0]==="t"&&($e>Z.bottom||d.current.bt)){var Be=C;sr?Be-=z-ue:Be=ze.y-ur.y-Y;var He=X(N,Be),Qr=X(N,Be,b);He>se||He===se&&(!q||Qr>=ce)?(d.current.bt=!0,C=Be,Y=-Y,De.points=[Ne(Q,0),Ne(Ce,0)]):d.current.bt=!1}if(vr&&Q[0]==="b"&&(Re<Z.top||d.current.tb)){var _=C;sr?_+=z-ue:_=ir.y-or.y-Y;var Rr=X(N,_),Jr=X(N,_,b);Rr>se||Rr===se&&(!q||Jr>=ce)?(d.current.tb=!0,C=_,Y=-Y,De.points=[Ne(Q,0),Ne(Ce,0)]):d.current.tb=!1}var $r=Dr(jr),kr=Q[1]===Ce[1];if($r&&Q[1]==="l"&&(Ke>Z.right||d.current.rl)){var _e=N;kr?_e-=K-le:_e=ze.x-ur.x-ae;var Lr=X(_e,C),Gr=X(_e,C,b);Lr>se||Lr===se&&(!q||Gr>=ce)?(d.current.rl=!0,N=_e,ae=-ae,De.points=[Ne(Q,1),Ne(Ce,1)]):d.current.rl=!1}if($r&&Q[1]==="r"&&(ke<Z.left||d.current.lr)){var Ve=N;kr?Ve+=K-le:Ve=ir.x-or.x-ae;var Nr=X(Ve,C),Ze=X(Ve,C,b);Nr>se||Nr===se&&(!q||Ze>=ce)?(d.current.lr=!0,N=Ve,ae=-ae,De.points=[Ne(Q,1),Ne(Ce,1)]):d.current.lr=!1}Br();var Se=Ge===!0?0:Ge;typeof Se=="number"&&(ke<b.left&&(N-=ke-b.left-ae,M.x+le<b.left+Se&&(N+=M.x-b.left+le-Se)),Ke>b.right&&(N-=Ke-b.right-ae,M.x>b.right-Se&&(N+=M.x-b.right+Se)));var Fe=lr===!0?0:lr;typeof Fe=="number"&&(Re<b.top&&(C-=Re-b.top-Y,M.y+ue<b.top+Fe&&(C+=M.y-b.top+ue-Fe)),$e>b.bottom&&(C-=$e-b.bottom-Y,M.y>b.bottom-Fe&&(C+=M.y-b.bottom+Fe)));var Ye=R.x+N,Xe=Ye+K,Me=R.y+C,Tr=Me+z,Ae=M.x,Le=Ae+le,Er=M.y,Kr=Er+ue,Zr=Math.max(Ye,Ae),xr=Math.min(Xe,Le),Yr=(Zr+xr)/2,Xr=Yr-Ye,Or=Math.max(Me,Er),Wr=Math.min(Tr,Kr),pr=(Or+Wr)/2,et=pr-Me;l==null||l(t,De);var zr=yr.right-R.x-(N+R.width),rt=yr.bottom-R.y-(C+R.height);g({ready:!0,offsetX:N/xe,offsetY:C/We,offsetR:zr/xe,offsetB:rt/We,arrowX:Xr/xe,arrowY:et/We,scaleX:xe,scaleY:We,align:De})}}),L=function(){v.current+=1;var P=v.current;Promise.resolve().then(function(){v.current===P&&D()})},B=function(){g(function(P){return A(A({},P),{},{ready:!1})})};return F(B,[o]),F(function(){e||B()},[e]),[c.ready,c.offsetX,c.offsetY,c.offsetR,c.offsetB,c.arrowX,c.arrowY,c.scaleX,c.scaleY,c.align,L]}function pt(e,t,r,o,n){F(function(){if(e&&t&&r){let v=function(){o(),n()};var u=t,l=r,s=st(u),h=st(l),c=gr(l),g=new Set([c].concat(ut(s),ut(h)));return g.forEach(function(S){S.addEventListener("scroll",v,{passive:!0})}),c.addEventListener("resize",v,{passive:!0}),o(),function(){g.forEach(function(S){S.removeEventListener("scroll",v),c.removeEventListener("resize",v)})}}},[e,t,r])}function ea(e,t,r,o,n,u,l,s){var h=a.useRef(e);h.current=e,a.useEffect(function(){if(t&&o&&(!n||u)){var c=function(d){var y=d.target;h.current&&!l(y)&&s(!1)},g=gr(o);g.addEventListener("mousedown",c,!0),g.addEventListener("contextmenu",c,!0);var v=vt(r);return v&&(v.addEventListener("mousedown",c,!0),v.addEventListener("contextmenu",c,!0)),function(){g.removeEventListener("mousedown",c,!0),g.removeEventListener("contextmenu",c,!0),v&&(v.removeEventListener("mousedown",c,!0),v.removeEventListener("contextmenu",c,!0))}}},[t,r,o,n,u])}var ra=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ta(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt,t=a.forwardRef(function(r,o){var n=r.prefixCls,u=n===void 0?"rc-trigger-popup":n,l=r.children,s=r.action,h=s===void 0?"hover":s,c=r.showAction,g=r.hideAction,v=r.popupVisible,S=r.defaultPopupVisible,d=r.onPopupVisibleChange,y=r.afterPopupVisibleChange,D=r.mouseEnterDelay,L=r.mouseLeaveDelay,B=L===void 0?.1:L,T=r.focusDelay,P=r.blurDelay,m=r.mask,H=r.maskClosable,O=H===void 0?!0:H,p=r.getPopupContainer,ne=r.forceRender,fe=r.autoDestroy,J=r.destroyPopupOnHide,ee=r.popup,de=r.popupClassName,me=r.popupStyle,oe=r.popupPlacement,he=r.builtinPlacements,E=he===void 0?{}:he,W=r.popupAlign,M=r.zIndex,G=r.stretch,R=r.getPopupClassNameFromAlign,ie=r.fresh,re=r.alignPoint,tr=r.onPopupClick,Ie=r.onPopupAlign,ge=r.arrow,qe=r.popupMotion,te=r.maskMotion,z=r.popupTransitionName,K=r.popupAnimation,ue=r.maskTransitionName,le=r.maskAnimation,je=r.className,ar=r.getTriggerDOMNode,V=Tt(r,ra),Qe=fe||J||!1,we=a.useState(!1),q=w(we,2),ye=q[0],b=q[1];F(function(){b(Ht())},[]);var Ee=a.useRef({}),Z=a.useContext(yt),yr=a.useMemo(function(){return{registerSubPopup:function(f,$){Ee.current[f]=$,Z==null||Z.registerSubPopup(f,$)}}},[Z]),xe=_t(),We=a.useState(null),Cr=w(We,2),U=Cr[0],Ur=Cr[1],Sr=Te(function(i){lt(i)&&U!==i&&Ur(i),Z==null||Z.registerSubPopup(xe,i)}),ae=a.useState(null),Y=w(ae,2),ve=Y[0],Mr=Y[1],br=a.useRef(null),Ir=Te(function(i){lt(i)&&ve!==i&&(Mr(i),br.current=i)}),Je=a.Children.only(l),j=(Je==null?void 0:Je.props)||{},Pe={},qr=Te(function(i){var f,$,x=ve;return(x==null?void 0:x.contains(i))||((f=vt(x))===null||f===void 0?void 0:f.host)===i||i===x||(U==null?void 0:U.contains(i))||(($=vt(U))===null||$===void 0?void 0:$.host)===i||i===U||Object.values(Ee.current).some(function(k){return(k==null?void 0:k.contains(i))||i===k})}),Ce=St(u,qe,K,z),Q=St(u,te,le,ue),wr=a.useState(S||!1),nr=w(wr,2),De=nr[0],N=nr[1],C=v??De,se=Te(function(i){v===void 0&&N(i)});F(function(){N(v||!1)},[v]);var ce=a.useRef(C);ce.current=C;var ze=a.useRef([]);ze.current=[];var or=Te(function(i){var f;se(i),((f=ze.current[ze.current.length-1])!==null&&f!==void 0?f:C)!==i&&(ze.current.push(i),d==null||d(i))}),ir=a.useRef(),ur=function(){clearTimeout(ir.current)},I=function(f){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ur(),$===0?or(f):ir.current=setTimeout(function(){or(f)},$*1e3)};a.useEffect(function(){return ur},[]);var jr=a.useState(!1),Pr=w(jr,2),Ge=Pr[0],lr=Pr[1];F(function(i){(!i||C)&&lr(!0)},[C]);var Dr=a.useState(null),Re=w(Dr,2),$e=Re[0],ke=Re[1],Ke=a.useState([0,0]),vr=w(Ke,2),sr=vr[0],Be=vr[1],He=function(f){Be([f.clientX,f.clientY])},Qr=Ot(C,U,re?sr:ve,oe,E,W,Ie),_=w(Qr,11),Rr=_[0],Jr=_[1],$r=_[2],kr=_[3],_e=_[4],Lr=_[5],Gr=_[6],Ve=_[7],Nr=_[8],Ze=_[9],Se=_[10],Fe=Zt(ye,h,c,g),Ye=w(Fe,2),Xe=Ye[0],Me=Ye[1],Tr=Xe.has("click"),Ae=Me.has("click")||Me.has("contextMenu"),Le=Te(function(){Ge||Se()}),Er=function(){ce.current&&re&&Ae&&I(!1)};pt(C,ve,U,Le,Er),F(function(){Le()},[sr,oe]),F(function(){C&&!(E!=null&&E[oe])&&Le()},[JSON.stringify(W)]);var Kr=a.useMemo(function(){var i=Xt(E,u,Ze,re);return rr(i,R==null?void 0:R(Ze))},[Ze,R,E,u,re]);a.useImperativeHandle(o,function(){return{nativeElement:br.current,forceAlign:Le}});var Zr=a.useState(0),xr=w(Zr,2),Yr=xr[0],Xr=xr[1],Or=a.useState(0),Wr=w(Or,2),pr=Wr[0],et=Wr[1],zr=function(){if(G&&ve){var f=ve.getBoundingClientRect();Xr(f.width),et(f.height)}},rt=function(){zr(),Le()},X=function(f){lr(!1),Se(),y==null||y(f)},Br=function(){return new Promise(function(f){zr(),ke(function(){return f})})};F(function(){$e&&(Se(),$e(),ke(null))},[$e]);function be(i,f,$,x){Pe[i]=function(k){var _r;x==null||x(k),I(f,$);for(var it=arguments.length,ct=new Array(it>1?it-1:0),Vr=1;Vr<it;Vr++)ct[Vr-1]=arguments[Vr];(_r=j[i])===null||_r===void 0||_r.call.apply(_r,[j,k].concat(ct))}}(Tr||Ae)&&(Pe.onClick=function(i){var f;ce.current&&Ae?I(!1):!ce.current&&Tr&&(He(i),I(!0));for(var $=arguments.length,x=new Array($>1?$-1:0),k=1;k<$;k++)x[k-1]=arguments[k];(f=j.onClick)===null||f===void 0||f.call.apply(f,[j,i].concat(x))}),ea(C,Ae,ve,U,m,O,qr,I);var Ue=Xe.has("hover"),Oe=Me.has("hover"),pe,cr;Ue&&(be("onMouseEnter",!0,D,function(i){He(i)}),be("onPointerEnter",!0,D,function(i){He(i)}),pe=function(f){(C||Ge)&&U!==null&&U!==void 0&&U.contains(f.target)&&I(!0,D)},re&&(Pe.onMouseMove=function(i){var f;(f=j.onMouseMove)===null||f===void 0||f.call(j,i)})),Oe&&(be("onMouseLeave",!1,B),be("onPointerLeave",!1,B),cr=function(){I(!1,B)}),Xe.has("focus")&&be("onFocus",!0,T),Me.has("focus")&&be("onBlur",!1,P),Xe.has("contextMenu")&&(Pe.onContextMenu=function(i){var f;ce.current&&Me.has("contextMenu")?I(!1):(He(i),I(!0)),i.preventDefault();for(var $=arguments.length,x=new Array($>1?$-1:0),k=1;k<$;k++)x[k-1]=arguments[k];(f=j.onContextMenu)===null||f===void 0||f.call.apply(f,[j,i].concat(x))}),je&&(Pe.className=rr(j.className,je));var fr=A(A({},j),Pe),Hr={},tt=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];tt.forEach(function(i){V[i]&&(Hr[i]=function(){for(var f,$=arguments.length,x=new Array($),k=0;k<$;k++)x[k]=arguments[k];(f=fr[i])===null||f===void 0||f.call.apply(f,[fr].concat(x)),V[i].apply(V,x)})});var at=a.cloneElement(Je,A(A({},fr),Hr)),nt={x:Lr,y:Gr},ot=ge?A({},ge!==!0?ge:{}):null;return a.createElement(a.Fragment,null,a.createElement($t,{disabled:!C,ref:Ir,onResize:rt},a.createElement(Kt,{getTriggerDOMNode:ar},at)),a.createElement(yt.Provider,{value:yr},a.createElement(Gt,{portal:e,ref:Sr,prefixCls:u,popup:ee,className:rr(de,Kr),style:me,target:ve,onMouseEnter:pe,onMouseLeave:cr,onPointerEnter:pe,zIndex:M,open:C,keepDom:Ge,fresh:ie,onClick:tr,mask:m,motion:Ce,maskMotion:Q,onVisibleChanged:X,onPrepare:Br,forceRender:ne,autoDestroy:Qe,getPopupContainer:p,align:Ze,arrow:ot,arrowPos:nt,ready:Rr,offsetX:Jr,offsetY:$r,offsetR:kr,offsetB:_e,onAlign:Le,stretch:G,targetWidth:Yr/Ve,targetHeight:pr/Nr})))});return t}const sa=ta(Nt);function ca(e){var t=a.createContext(void 0),r=function(n){var u=n.value,l=n.children,s=a.useRef(u);s.current=u;var h=a.useState(function(){return{getValue:function(){return s.current},listeners:new Set}}),c=w(h,1),g=c[0];return F(function(){Dt.unstable_batchedUpdates(function(){g.listeners.forEach(function(v){v(u)})})},[u]),a.createElement(t.Provider,{value:g},l)};return{Context:t,Provider:r,defaultValue:e}}function fa(e,t){var r=Te(typeof t=="function"?t:function(v){if(t===void 0)return v;if(!Array.isArray(t))return v[t];var S={};return t.forEach(function(d){S[d]=v[d]}),S}),o=a.useContext(e==null?void 0:e.Context),n=o||{},u=n.listeners,l=n.getValue,s=a.useRef();s.current=r(o?l():e==null?void 0:e.defaultValue);var h=a.useState({}),c=w(h,2),g=c[1];return F(function(){if(!o)return;function v(S){var d=r(S);Vt(s.current,d,!0)||g({})}return u.add(v),function(){u.delete(v)}},[o]),s.current}function da(){var e=a.createContext(null);function t(){return a.useContext(e)}function r(n,u){var l=Ar(n),s=function(c,g){var v=l?{ref:g}:{},S=a.useRef(0),d=a.useRef(c),y=t();return y!==null?a.createElement(n,mr({},c,v)):((!u||u(d.current,c))&&(S.current+=1),d.current=c,a.createElement(e.Provider,{value:S.current},a.createElement(n,mr({},c,v))))};return l?a.forwardRef(s):s}function o(n,u){var l=Ar(n),s=function(c,g){var v=l?{ref:g}:{};return t(),a.createElement(n,mr({},c,v))};return l?a.memo(a.forwardRef(s),u):a.memo(s,u)}return{makeImmutable:r,responseImmutable:o,useImmutableMark:t}}export{Nt as P,sa as T,ca as a,da as c,fa as u};
